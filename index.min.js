(()=>{const e=document.getElementById("uploader"),t=document.getElementById("iframe"),n=document.getElementById("placeholder"),l=document.getElementById("clear");let c=[];e.onchange=({target:{files:a}})=>{if(!a.length)return;if(c=[...a],!c.find((e=>"index.html"===e.name)))return e.value="",void alert("UI: index.html Not Found!");c=c.map((e=>({name:e.name,path:e.webkitRelativePath.replace(/^.*?\//,""),url:URL.createObjectURL(e)})));const o=c.find((e=>"index.html"===e.name));o&&fetch(o.url).then((e=>e.text())).then((e=>(c.forEach((t=>{const n=t.path.split("/").map(encodeURIComponent).join("/");e=e.replace(n,`${t.url}#`)})),e=e.replace(/\.\/blob/g,"blob")))).then((e=>e.replace("</head>",'<script src="https://neco86.github.io/Sketch-Measure-Compare/sketchMeasure.min.js"><\/script></head>'))).then((e=>{const c=new Blob([e],{type:"text/html"}),a=URL.createObjectURL(c);t.src=a,n.style.display="none",t.style.display="block",l.style.display="block"}))};const a=()=>{URL.revokeObjectURL(t.src),c.forEach((e=>{URL.revokeObjectURL(e.url)})),c=[],t.src="",e.value="",n.style.display="block",t.style.display="none",l.style.display="none"};document.addEventListener("beforeunload",a),l.onclick=a})();