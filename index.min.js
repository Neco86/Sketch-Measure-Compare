!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.sketchMeasureCompare=t():e.sketchMeasureCompare=t()}(self,(()=>(()=>{"use strict";var e={539:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,c,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var d=0;d<this.length;d++){var r=this[d][0];null!=r&&(a[r]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);o&&a[s[0]]||(void 0!==i&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=i),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),c&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=c):s[4]="".concat(c)),t.push(s))}},t}},725:e=>{e.exports=function(e){return e[1]}},693:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(725),c=n.n(o),i=n(539),a=n.n(i)()(c());a.push([e.id,"html,body{margin:0;padding:0;width:100vw;height:100vh;overflow:hidden;background-color:#fff;display:flex;align-items:center;justify-content:center}#iframe{width:100vw;height:100vh;border:0;display:none}",""]);const d=URL.createObjectURL(new Blob([a],{type:"text/css"}))}},t={};function n(o){var c=t[o];if(void 0!==c)return c.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{n.d(o,{default:()=>v});const e=URL.createObjectURL(new Blob(["("+function(){!function e(t){if(t.isInitSketchMeasureRulersDoc)return;t.isInitSketchMeasureRulersDoc=!0;var n=function(){!function(e){Array.from(e.querySelectorAll("*")).filter((function(e){return!["SCRIPT","STYLE","TITLE","HTML","HEAD","META","BODY","NOSCRIPT"].includes(e.nodeName)})).forEach((function(e){e.isInitSketchMeasureRulersNode||(e.isInitSketchMeasureRulersNode=!0,e.addEventListener("mouseenter",(function(){window.top.sketchMeasureCompare.config.enableDomRulers&&window.parent.postMessage({msg:"updateRulers",payload:e.getBoundingClientRect()},"*")})),e.addEventListener("mouseleave",(function(){window.top.sketchMeasureCompare.config.enableDomRulers&&window.parent.postMessage({msg:"updateRulers",payload:{width:0,height:0,top:0,left:0}},"*")})))}))}(t),document.querySelectorAll("iframe").forEach((function(t){t.contentDocument&&e(t.contentDocument)}))};n(),new MutationObserver(n).observe(t.documentElement,{attributes:!0,childList:!0,subtree:!0})}(document)}.toString()+")()"],{type:"text/javascript"})),t=URL.createObjectURL(new Blob(["("+function(){var e=!1,t=function(){var t,n;if(!e){var o=null===(t=document.getElementsByClassName("screen-viewer-inner"))||void 0===t?void 0:t[0],c=document.getElementById("screen"),i=document.getElementById("rulers"),a=document.getElementById("flow-mode"),d=null===(n=document.getElementsByClassName("header-center"))||void 0===n?void 0:n[0];if(o&&c&&i&&a&&d){e=!0;var r=function(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))},l=document.createElement("iframe"),s=document.createElement("div"),p=document.createElement("div");p.innerHTML="CLEAR UI",r(s,{display:"flex",alignItems:"center",justifyContent:"center",padding:"0 25px 0 10px",whiteSpace:"nowrap"}),r(p,{padding:"5px",border:"1px solid",cursor:"pointer"}),p.onclick=function(){l.contentDocument&&(l.contentWindow.onbeforeunload=function(){}),window.parent.postMessage({msg:"CLEAR UI"},"*")},s.appendChild(p),d.appendChild(s);var u=document.createElement("style");u.innerHTML=".layer{z-index: 1;}",document.head.appendChild(u),window.top.onbeforeunload=function(){return!1};var h=0,m=function(){h=window.top.sketchMeasureCompare.config.offsetY,r(l,{top:"".concat(h,"px"),height:"calc(100% - ".concat(h,"px)")})};m(),r(l,{border:"none",position:"absolute"}),l.width="100%",l.height="100%",l.src=window.top.location.href,l.onload=function(){if(m(),l.contentDocument){if(l.contentWindow.onbeforeunload=function(){return!1},window.top.sketchMeasureCompare.config.enableDomRulers){var e=document.createElement("script");e.src=window.top.sketchMeasureCompare.rulers,l.contentDocument.head.appendChild(e)}if(window.top.sketchMeasureCompare.config.enableTextReplace){var t=document.createElement("script");t.src=window.top.sketchMeasureCompare.textReplace,l.contentDocument.head.appendChild(t)}}};var f=document.createElement("input");r(f,{border:"none",outline:"none",height:"20px"}),f.placeholder="url",f.value=l.src,f.oninput=function(e){l.contentDocument&&(l.contentWindow.onbeforeunload=function(){}),l.src=e.target.value},f.onkeyup=function(e){"Enter"===e.key&&(l.contentDocument&&(l.contentWindow.onbeforeunload=function(){}),l.src="",l.src=e.target.value)};var v=c.cloneNode(!1);r(v,{backgroundImage:"",overflow:"hidden"});var y=i.cloneNode(!0);y.appendChild(y.childNodes[0].cloneNode(!0)),y.appendChild(y.childNodes[1].cloneNode(!0)),r(y.childNodes[0],{border:"none",borderLeft:"1px dashed #419bf9",width:"0px"}),r(y.childNodes[1],{border:"none",borderTop:"1px dashed #419bf9",height:"0px"}),r(y.childNodes[2],{border:"none",borderRight:"1px dashed #419bf9",width:"0px"}),r(y.childNodes[3],{border:"none",borderBottom:"1px dashed #419bf9",height:"0px"});var g=i.cloneNode(!0);g.appendChild(g.childNodes[0].cloneNode(!0)),g.appendChild(g.childNodes[1].cloneNode(!0)),r(g.childNodes[0],{border:"none",borderLeft:"1px dashed #ee6723",width:"0px"}),r(g.childNodes[1],{border:"none",borderTop:"1px dashed #ee6723",height:"0px"}),r(g.childNodes[2],{border:"none",borderRight:"1px dashed #ee6723",width:"0px"}),r(g.childNodes[3],{border:"none",borderBottom:"1px dashed #ee6723",height:"0px"});var w=document.getElementById("ld").cloneNode(!0),b=document.getElementById("td").cloneNode(!0),x=document.getElementById("rd").cloneNode(!0),N=document.getElementById("bd").cloneNode(!0);v.appendChild(l),v.appendChild(y),v.appendChild(g),v.appendChild(w),v.appendChild(b),v.appendChild(x),v.appendChild(N),o.appendChild(f),o.appendChild(v);var C=function(){var e,t,n=c.style,o=n.width,d=n.height,s=n.marginTop;o!==v.style.width&&(l.contentDocument&&(l.contentWindow.onbeforeunload=function(){}),l.src="",l.src=f.value),r(v,{width:o,height:d,marginTop:s,marginLeft:a.checked?0:"".concat(parseFloat(o)/2+10,"px"),opacity:a.checked?.5:1}),v.className=c.className,r(f,{width:o,marginTop:"-".concat(parseFloat(d)/2+20+10,"px"),marginLeft:a.checked?0:"".concat(parseFloat(o)/2+10,"px")}),f.className=c.className,r(y,i.style),r(y.childNodes[0],{left:i.childNodes[0].style.left}),r(y.childNodes[1],{top:i.childNodes[1].style.top}),r(y.childNodes[2],{left:"".concat(parseFloat(i.childNodes[0].style.left)+parseFloat(i.childNodes[0].style.width),"px")}),r(y.childNodes[3],{top:"".concat(parseFloat(i.childNodes[1].style.top)+parseFloat(i.childNodes[1].style.height),"px")});var p=null===(e=document.getElementsByClassName("selected"))||void 0===e||null===(t=e[0])||void 0===t?void 0:t.style;p&&(r(g,{display:""}),r(g.childNodes[0],{left:p.left}),r(g.childNodes[1],{top:p.top}),r(g.childNodes[2],{left:"".concat(parseFloat(p.left)+parseFloat(p.width),"px")}),r(g.childNodes[3],{top:"".concat(parseFloat(p.top)+parseFloat(p.height),"px")})),a.checked&&(r(i,{display:"none"}),r(y,{display:"none"}),r(g,{display:"none"}),r(w,{display:"none"}),r(b,{display:"none"}),r(x,{display:"none"}),r(N,{display:"none"}))};C(),window.addEventListener("message",(function(e){var t=e.data;if(t&&t.msg){var n=t.msg,o=t.payload;if("updateRulers"===n)if(r(i,{display:a.checked?"none":""}),r(i.childNodes[0],{left:"".concat(o.left,"px"),width:"".concat(o.width,"px")}),r(i.childNodes[1],{top:"".concat(o.top+h,"px"),height:"".concat(o.height,"px")}),r(y,{display:a.checked?"none":""}),r(y.childNodes[0],{left:"".concat(o.left,"px")}),r(y.childNodes[1],{top:"".concat(o.top+h,"px")}),r(y.childNodes[2],{left:"".concat(o.left+o.width,"px")}),r(y.childNodes[3],{top:"".concat(o.top+o.height+h,"px")}),"none"!==g.style.display){var c=parseFloat(g.childNodes[0].style.left),d=parseFloat(g.childNodes[1].style.top),l=parseFloat(g.childNodes[2].style.left),s=parseFloat(g.childNodes[3].style.top),p=o.left,u=o.top+h,m=o.left+o.width,f=o.top+o.height+h,v=p||u||m||f;r(w,m<=c?{display:v?"":"none",left:"".concat(m,"px"),top:"".concat(d+(s-d)/2,"px"),width:"".concat(c-m,"px")}:{display:p<l&&v?"":"none",left:"".concat(p<c?p:c,"px"),top:"".concat(d+(s-d)/2,"px"),width:"".concat(Math.abs(p-c),"px")}),w.childNodes[0].dataset.width=w.style.width,r(x,p>=l?{display:v?"":"none",left:"".concat(l,"px"),top:"".concat(d+(s-d)/2,"px"),width:"".concat(p-l,"px")}:{display:m>c&&v?"":"none",left:"".concat(m>l?l:m,"px"),top:"".concat(d+(s-d)/2,"px"),width:"".concat(Math.abs(m-l),"px")}),x.childNodes[0].dataset.width=x.style.width,r(b,f<=d?{display:v?"":"none",left:"".concat(c+(l-c)/2,"px"),top:"".concat(f,"px"),height:"".concat(d-f,"px")}:{display:u<s&&v?"":"none",left:"".concat(c+(l-c)/2,"px"),top:"".concat(u<d?u:d,"px"),height:"".concat(Math.abs(u-d),"px")}),b.childNodes[0].dataset.height=b.style.height,r(N,u>=s?{display:v?"":"none",left:"".concat(c+(l-c)/2,"px"),top:"".concat(s,"px"),height:"".concat(u-s,"px")}:{display:f>d&&v?"":"none",left:"".concat(c+(l-c)/2,"px"),top:"".concat(f>s?s:f,"px"),height:"".concat(Math.abs(f-s),"px")}),N.childNodes[0].dataset.height=N.style.height}}})),document.onkeyup=function(e){"c"!==e.key||a.checked||(r(g,{display:""}),r(g.childNodes[0],{left:y.childNodes[0].style.left}),r(g.childNodes[1],{top:y.childNodes[1].style.top}),r(g.childNodes[2],{left:y.childNodes[2].style.left}),r(g.childNodes[3],{top:y.childNodes[3].style.top}),o.click())},new MutationObserver(C).observe(c,{attributes:!0,childList:!0,subtree:!0})}}};setTimeout(t,220),setTimeout(t,500),setTimeout(t,1e3),setTimeout(t,3e3),setTimeout(t,5e3)}.toString()+")()"],{type:"text/javascript"})),c=URL.createObjectURL(new Blob(["("+function(){var e=document.getElementById("uploader"),t=document.getElementById("iframe"),n=document.getElementById("placeholder"),o=[];e.onchange=function(c){var i,a,d,r,l=c.target.files;if(l.length){var s=!!(o=Array.from(l)).find((function(e){return"index.html"===e.name})),p=o.filter((function(e){return/image/.test(e.type)}));if(!s&&!p.length)return e.value="",void alert("WRONG FOLDER!");!s&&p.length&&(window.top.sketchMeasureCompare.tplImgList=p.map((function(e){return{name:e.name.replace(/\.[^\.]+$/g,""),url:"".concat(URL.createObjectURL(e),"#")}})));var u=null!==(i=null===(a=o.find((function(e){return"index.html"===e.name})))||void 0===a||null===(d=a.webkitRelativePath)||void 0===d||null===(r=d.replace)||void 0===r?void 0:r.call(d,"index.html",""))&&void 0!==i?i:"",h=new RegExp("^".concat(u)),m=(o=o.map((function(e){return{name:e.name,path:e.webkitRelativePath.replace(h,""),url:URL.createObjectURL(e)}}))).find((function(e){return"index.html"===e.name}))||{url:window.top.sketchMeasureCompare.tpl};m&&fetch(m.url).then((function(e){return e.text()})).then((function(e){return o.forEach((function(t){var n=t.path.split("/").map(encodeURIComponent).join("/");e=e.replace(n,"".concat(t.url,"#"))})),e=e.replace(/\.\/blob/g,"blob")})).then((function(e){return e=e.replace("</head>",'<script src="'.concat(window.top.sketchMeasureCompare.sketchMeasure,'"><\/script></head>'))})).then((function(e){var o=new Blob([e],{type:"text/html"}),c=URL.createObjectURL(o);t.src=c,n.style.display="none",t.style.display="block"}))}};var c=function(){URL.revokeObjectURL(t.src),o.forEach((function(e){URL.revokeObjectURL(e.url)})),(window.top.sketchMeasureCompare.tplImgList||[]).forEach((function(e){return URL.revokeObjectURL(e.url)})),delete window.top.sketchMeasureCompare.tplImgList,o=[],t.src="",e.value="",n.style.display="block",t.style.display="none"};document.addEventListener("beforeunload",c),window.addEventListener("message",(function(e){var t=e.data;t&&t.msg&&("CLEAR UI"===t.msg&&c())}))}.toString()+")()"],{type:"text/javascript"}));var i=n(693);const a=URL.createObjectURL(new Blob(['<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="UTF-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta name="viewport" content="width=device-width,initial-scale=1"/> <title>Sketch Measure Compare</title> </head> <body> <div id="placeholder"> <div>Please Choose UI Folder!</div> <br/> <input type="file" webkitdirectory id="uploader"/> </div> <iframe id="iframe"></iframe> <script>(()=>{"use strict";const e=document.createElement("script");e.src=window.top.sketchMeasureCompare.index,document.body.appendChild(e);const t=document.createElement("link");t.rel="stylesheet",t.href=window.top.sketchMeasureCompare.css,document.head.appendChild(t)})()<\/script> </body> </html> '],{type:"text/html"})),d=URL.createObjectURL(new Blob(["("+function(){var e=window.top.sketchMeasureCompare.tplImgList||[];e.length&&Promise.all(e.map((function(e){return new Promise((function(t){var n=document.createElement("img");n.onload=function(){return t({img:n,name:e.name})},n.onerror=function(){return t(null)},n.src=e.url}))}))).then((function(e){var t={resolution:1,unit:"px",colorFormat:"color-hex",artboards:e.filter(Boolean).map((function(e){var t=e.img;return{notes:[],layers:[],name:e.name,pageName:"",width:t.width,height:t.height,imagePath:t.src,imageIconPath:t.src}}))};meaxure.render(t)}))}.toString()+")()"],{type:"text/javascript"}));const r=URL.createObjectURL(new Blob(['<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="utf-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta name="viewport" content="width=device-width,initial-scale=1"/> <title>Spec Export - Sketch MeaXure</title> <script src="https://hubzyy.gitee.io/sketch-meaxure/src/jquery.js"><\/script> <script src="https://hubzyy.gitee.io/sketch-meaxure/src/index.js"><\/script> <link rel="stylesheet" href="https://hubzyy.gitee.io/sketch-meaxure/src/index.css"/> </head> <body id="app"> <script>(()=>{"use strict";const e=document.createElement("script");e.src=window.top.sketchMeasureCompare.tplIndex,document.body.appendChild(e)})()<\/script> </body> </html> '],{type:"text/html"})),l=URL.createObjectURL(new Blob(["("+function(){!function e(t){if(t.isInitSketchMeasureTextPlaceDoc)return;t.isInitSketchMeasureTextPlaceDoc=!0;var n=function(){!function(e){Array.from(e.querySelectorAll("*")).filter((function(e){return!["SCRIPT","STYLE","TITLE","HTML","HEAD","META","BODY","NOSCRIPT"].includes(e.nodeName)&&1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName})).forEach((function(e){e.isInitSketchMeasureTextPlaceNode||(e.isInitSketchMeasureTextPlaceNode=!0,e.contentEditable=!0,e.addEventListener("contextmenu",(function(e){e.preventDefault()})),e.addEventListener("mousedown",(function(e){var t,n,o=null===(t=window)||void 0===t||null===(n=t.parent)||void 0===n?void 0:n.content;2===e.button&&o&&window.top.sketchMeasureCompare.config.enableTextReplace&&(e.preventDefault(),e.target.innerHTML=o.innerHTML.replace(/\s/g,""))})),e.onclick=function(e){return e.preventDefault(),e.stopPropagation(),!1})}))}(t),document.querySelectorAll("iframe").forEach((function(t){t.contentDocument&&e(t.contentDocument)}))};n(),new MutationObserver(n).observe(t.documentElement,{attributes:!0,childList:!0,subtree:!0})}(document)}.toString()+")()"],{type:"text/javascript"}));var s=!1;const p=function(e){var t,n,o,c;if(!s){s=!0;var i=null!==(t=null==e?void 0:e.zIndex)&&void 0!==t?t:1e4,a=null!==(n=null==e?void 0:e.enableDomRulers)&&void 0!==n&&n,d=null!==(o=null==e?void 0:e.enableTextReplace)&&void 0!==o&&o,r=null!==(c=null==e?void 0:e.offsetY)&&void 0!==c?c:0;window.top.sketchMeasureCompare.config={zIndex:i,enableDomRulers:a,enableTextReplace:d,offsetY:r};var l=document.createElement("iframe"),p=function(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))};p(l,{width:"100vw",height:"100vh",position:"fixed",top:"0",left:"0",border:"none",zIndex:"".concat(i),display:"none"});var u=document.createElement("div");p(u,{position:"fixed",zIndex:"".concat(i),width:"100vw",height:"0",top:"0",left:"0"});var h=document.createElement("div");p(h,{position:"fixed",zIndex:"".concat(i),right:"0",bottom:"40px",backgroundColor:"#04BE02",padding:"2px 14px",borderRadius:"3px",color:"#fff",height:"26px",lineHeight:"22px",fontSize:"16px",userSelect:"none",webkitUserSelect:"none"}),h.innerText="UI";var m=0,f=0,v=!1,y=0,g=0,w=0,b=0;h.onclick=function(e){var t=h.getBoundingClientRect(),n=t.left,o=t.top;(Math.abs(n-y)<1||Math.abs(o-g)<1||!(null!=e&&e.isTrusted))&&(l.style.display="none"===l.style.display?"block":"none")};var x=function(e){var t,n,o,c,i,a;u.style.height="100vh";var d=h.getBoundingClientRect(),r=d.left,l=d.top,s=d.width,p=d.height,x=u.getBoundingClientRect(),N=x.width,C=x.height;y=r,g=l,w=C,b=N;var k=null!==(t=null==e||null===(n=e.touches)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.clientX)&&void 0!==t?t:null==e?void 0:e.clientX,E=null!==(c=null==e||null===(i=e.touches)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.clientY)&&void 0!==c?c:null==e?void 0:e.clientY;m=k-y-s,f=E-g-p,v=!0},N=function(){u.style.height="0",v=!1},C=function(e){if(e.preventDefault(),v){var t,n,o,c,i,a,d=null!==(t=null==e||null===(n=e.touches)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.clientX)&&void 0!==t?t:null==e?void 0:e.clientX,r=null!==(c=null==e||null===(i=e.touches)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.clientY)&&void 0!==c?c:null==e?void 0:e.clientY;h.style.right=b-d+m+"px",h.style.bottom=w-r+f+"px"}};h.onmousedown=x,u.onmousemove=C,u.onmouseup=N,h.ontouchstart=x,u.ontouchmove=C,u.ontouchend=N,u.appendChild(h),l.src=window.top.sketchMeasureCompare.html,document.body.appendChild(l),document.body.appendChild(u)}};function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var m=h((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=p}));if(m.prototype.rulers=e,m.prototype.sketchMeasure=t,m.prototype.index=c,m.prototype.css=i.Z,m.prototype.html=a,m.prototype.tplIndex=d,m.prototype.tpl=r,m.prototype.textReplace=l,!window.top.sketchMeasureCompare){var f=new m;window.top.sketchMeasureCompare=f}const v=window.top.sketchMeasureCompare})(),o=o.default})()));