(()=>{const t=document.getElementById("uploader"),l=document.getElementById("iframe"),n=document.getElementById("placeholder"),a=document.getElementById("clear");let c=[];t.onchange=({target:{files:e}})=>{if(e.length){if(!!!(c=[...e]).find(e=>"index.html"===e.name))return t.value="",void alert("UI: index.html Not Found!");e=(c=c.map(e=>({name:e.name,path:e.webkitRelativePath.replace(/^.*?\//,""),url:URL.createObjectURL(e)}))).find(e=>"index.html"===e.name);e&&fetch(e.url).then(e=>e.text()).then(l=>(c.forEach(e=>{var t=e.path.split("/").map(encodeURIComponent).join("/");l=l.replace(t,e.url+"#")}),l=l.replace(/\.\/blob/g,"blob"))).then(e=>e=e.replace("</head>",'<script src="https://neco86.github.io/Sketch-Measure-Compare/sketchMeasure.min.js"><\/script></head>')).then(e=>{e=new Blob([e],{type:"text/html"}),e=URL.createObjectURL(e);l.src=e,n.style.display="none",l.style.display="block",a.style.display="block"})}};var e=()=>{URL.revokeObjectURL(l.src),c.forEach(e=>{URL.revokeObjectURL(e.url)}),c=[],l.src="",t.value="",n.style.display="block",l.style.display="none",a.style.display="none"};document.addEventListener("beforeunload",e),a.onclick=e})();