!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.sketchMeasureCompare=t():e.sketchMeasureCompare=t()}(self,(()=>(()=>{"use strict";var e={539:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",n=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),n&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),n&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,n,i,c){"string"==typeof e&&(e=[[null,e,void 0]]);var d={};if(n)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(d[l]=!0)}for(var r=0;r<e.length;r++){var s=[].concat(e[r]);n&&d[s[0]]||(void 0!==c&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=c),o&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=o):s[2]=o),i&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=i):s[4]="".concat(i)),t.push(s))}},t}},725:e=>{e.exports=function(e){return e[1]}},693:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(725),i=o.n(n),c=o(539),d=o.n(c)()(i());d.push([e.id,"html,body{margin:0;padding:0;width:100vw;height:100vh;overflow:hidden;background-color:#fff;display:flex;align-items:center;justify-content:center}#iframe{width:100vw;height:100vh;border:0;display:none}",""]);const a=URL.createObjectURL(new Blob([d],{type:"text/css"}))}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var c=t[n]={id:n,exports:{}};return e[n](c,c.exports,o),c.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{o.d(n,{default:()=>f});const e=URL.createObjectURL(new Blob(["("+function(){!function e(t){if(t.isInitSketchMeasureDoc)return;t.isInitSketchMeasureDoc=!0;var o=function(){!function(e){e.querySelectorAll("*").forEach((function(e){e.isInitSketchMeasureNode||(e.isInitSketchMeasureNode=!0,e.addEventListener("mouseenter",(function(){window.parent.postMessage({msg:"updateRulers",payload:e.getBoundingClientRect()},"*")})),e.addEventListener("mouseleave",(function(){window.parent.postMessage({msg:"updateRulers",payload:{width:0,height:0,top:0,left:0}},"*")})))}))}(t),document.querySelectorAll("iframe").forEach((function(t){t.contentDocument&&e(t.contentDocument)}))};o(),new MutationObserver(o).observe(t.documentElement,{attributes:!0,childList:!0,subtree:!0})}(document)}.toString()+")()"],{type:"text/javascript"})),t=URL.createObjectURL(new Blob(["("+function(){var e=!1,t=function(){var t,o;if(!e){var n=null===(t=document.getElementsByClassName("screen-viewer-inner"))||void 0===t?void 0:t[0],i=document.getElementById("screen"),c=document.getElementById("rulers"),d=document.getElementById("flow-mode"),a=null===(o=document.getElementsByClassName("header-center"))||void 0===o?void 0:o[0];if(n&&i&&c&&d&&a){e=!0;var l=function(e,t){Object.keys(t).forEach((function(o){e.style[o]=t[o]}))},r=document.createElement("div"),s=document.createElement("div");s.innerHTML="CLEAR UI",l(r,{display:"flex",alignItems:"center",justifyContent:"center",padding:"0 25px 0 10px",whiteSpace:"nowrap"}),l(s,{padding:"5px",border:"1px solid",cursor:"pointer"}),s.onclick=function(){return window.parent.postMessage({msg:"CLEAR UI"},"*")},r.appendChild(s),a.appendChild(r);var p=document.createElement("style");p.innerHTML=".layer{z-index: 1;}",document.head.appendChild(p),window.top.onbeforeunload=function(){return!1};var h=document.createElement("iframe");l(h,{border:"none",position:"absolute"}),h.width="100%",h.height="100%",h.src=window.top.location.href,h.onload=function(){if(h.contentDocument&&window.top.sketchMeasureCompare.config.enableDomRulers){var e=document.createElement("script");e.src=window.top.sketchMeasureCompare.rulers,h.contentDocument.head.appendChild(e)}};var u=document.createElement("input");l(u,{border:"none",outline:"none",height:"20px"}),u.placeholder="url",u.value=h.src,u.oninput=function(e){h.src=e.target.value},u.onkeyup=function(e){"Enter"===e.key&&(h.src="",h.src=e.target.value)};var m=i.cloneNode(!1);l(m,{backgroundImage:"",overflow:"hidden"});var f=c.cloneNode(!0);f.appendChild(f.childNodes[0].cloneNode(!0)),f.appendChild(f.childNodes[1].cloneNode(!0)),l(f.childNodes[0],{border:"none",borderLeft:"1px dashed #419bf9",width:"0px"}),l(f.childNodes[1],{border:"none",borderTop:"1px dashed #419bf9",height:"0px"}),l(f.childNodes[2],{border:"none",borderRight:"1px dashed #419bf9",width:"0px"}),l(f.childNodes[3],{border:"none",borderBottom:"1px dashed #419bf9",height:"0px"});var v=c.cloneNode(!0);v.appendChild(v.childNodes[0].cloneNode(!0)),v.appendChild(v.childNodes[1].cloneNode(!0)),l(v.childNodes[0],{border:"none",borderLeft:"1px dashed #ee6723",width:"0px"}),l(v.childNodes[1],{border:"none",borderTop:"1px dashed #ee6723",height:"0px"}),l(v.childNodes[2],{border:"none",borderRight:"1px dashed #ee6723",width:"0px"}),l(v.childNodes[3],{border:"none",borderBottom:"1px dashed #ee6723",height:"0px"});var y=document.getElementById("ld").cloneNode(!0),g=document.getElementById("td").cloneNode(!0),x=document.getElementById("rd").cloneNode(!0),w=document.getElementById("bd").cloneNode(!0);m.appendChild(h),m.appendChild(f),m.appendChild(v),m.appendChild(y),m.appendChild(g),m.appendChild(x),m.appendChild(w),n.appendChild(u),n.appendChild(m);var b=function(){var e,t,o=i.style,n=o.width,a=o.height,r=o.marginTop;n!==m.style.width&&(h.src="",h.src=u.value),l(m,{width:n,height:a,marginTop:r,marginLeft:d.checked?0:"".concat(parseFloat(n)/2+10,"px"),opacity:d.checked?.5:1}),m.className=i.className,l(u,{width:n,marginTop:"-".concat(parseFloat(a)/2+20+10,"px"),marginLeft:d.checked?0:"".concat(parseFloat(n)/2+10,"px")}),u.className=i.className,l(f,c.style),l(f.childNodes[0],{left:c.childNodes[0].style.left}),l(f.childNodes[1],{top:c.childNodes[1].style.top}),l(f.childNodes[2],{left:"".concat(parseFloat(c.childNodes[0].style.left)+parseFloat(c.childNodes[0].style.width),"px")}),l(f.childNodes[3],{top:"".concat(parseFloat(c.childNodes[1].style.top)+parseFloat(c.childNodes[1].style.height),"px")});var s=null===(e=document.getElementsByClassName("selected"))||void 0===e||null===(t=e[0])||void 0===t?void 0:t.style;s&&(l(v,{display:""}),l(v.childNodes[0],{left:s.left}),l(v.childNodes[1],{top:s.top}),l(v.childNodes[2],{left:"".concat(parseFloat(s.left)+parseFloat(s.width),"px")}),l(v.childNodes[3],{top:"".concat(parseFloat(s.top)+parseFloat(s.height),"px")})),d.checked&&(l(c,{display:"none"}),l(f,{display:"none"}),l(v,{display:"none"}),l(y,{display:"none"}),l(g,{display:"none"}),l(x,{display:"none"}),l(w,{display:"none"}))};b(),window.addEventListener("message",(function(e){var t=e.data;if(t&&t.msg){var o=t.msg,n=t.payload;if("updateRulers"===o)if(l(c,{display:d.checked?"none":""}),l(c.childNodes[0],{left:"".concat(n.left,"px"),width:"".concat(n.width,"px")}),l(c.childNodes[1],{top:"".concat(n.top,"px"),height:"".concat(n.height,"px")}),l(f,{display:d.checked?"none":""}),l(f.childNodes[0],{left:"".concat(n.left,"px")}),l(f.childNodes[1],{top:"".concat(n.top,"px")}),l(f.childNodes[2],{left:"".concat(n.left+n.width,"px")}),l(f.childNodes[3],{top:"".concat(n.top+n.height,"px")}),"none"!==v.style.display){var i=parseFloat(v.childNodes[0].style.left),a=parseFloat(v.childNodes[1].style.top),r=parseFloat(v.childNodes[2].style.left),s=parseFloat(v.childNodes[3].style.top),p=n.left,h=n.top,u=n.left+n.width,m=n.top+n.height,b=p||h||u||m;l(y,u<=i?{display:b?"":"none",left:"".concat(u,"px"),top:"".concat(a+(s-a)/2,"px"),width:"".concat(i-u,"px")}:{display:p<r&&b?"":"none",left:"".concat(p<i?p:i,"px"),top:"".concat(a+(s-a)/2,"px"),width:"".concat(Math.abs(p-i),"px")}),y.childNodes[0].dataset.width=y.style.width,l(x,p>=r?{display:b?"":"none",left:"".concat(r,"px"),top:"".concat(a+(s-a)/2,"px"),width:"".concat(p-r,"px")}:{display:u>i&&b?"":"none",left:"".concat(u>r?r:u,"px"),top:"".concat(a+(s-a)/2,"px"),width:"".concat(Math.abs(u-r),"px")}),x.childNodes[0].dataset.width=x.style.width,l(g,m<=a?{display:b?"":"none",left:"".concat(i+(r-i)/2,"px"),top:"".concat(m,"px"),height:"".concat(a-m,"px")}:{display:h<s&&b?"":"none",left:"".concat(i+(r-i)/2,"px"),top:"".concat(h<a?h:a,"px"),height:"".concat(Math.abs(h-a),"px")}),g.childNodes[0].dataset.height=g.style.height,l(w,h>=s?{display:b?"":"none",left:"".concat(i+(r-i)/2,"px"),top:"".concat(s,"px"),height:"".concat(h-s,"px")}:{display:m>a&&b?"":"none",left:"".concat(i+(r-i)/2,"px"),top:"".concat(m>s?s:m,"px"),height:"".concat(Math.abs(m-s),"px")}),w.childNodes[0].dataset.height=w.style.height}}})),document.onkeyup=function(e){"c"!==e.key||d.checked||(l(v,{display:""}),l(v.childNodes[0],{left:f.childNodes[0].style.left}),l(v.childNodes[1],{top:f.childNodes[1].style.top}),l(v.childNodes[2],{left:f.childNodes[2].style.left}),l(v.childNodes[3],{top:f.childNodes[3].style.top}),n.click())},new MutationObserver(b).observe(i,{attributes:!0,childList:!0,subtree:!0})}}};setTimeout(t,220),setTimeout(t,500),setTimeout(t,1e3),setTimeout(t,3e3),setTimeout(t,5e3)}.toString()+")()"],{type:"text/javascript"})),i=URL.createObjectURL(new Blob(["("+function(){var e=document.getElementById("uploader"),t=document.getElementById("iframe"),o=document.getElementById("placeholder"),n=[];e.onchange=function(i){var c,d,a,l,r=i.target.files;if(r.length){var s=!!(n=Array.from(r)).find((function(e){return"index.html"===e.name})),p=n.filter((function(e){return/image/.test(e.type)}));if(!s&&!p.length)return e.value="",void alert("WRONG FOLDER!");!s&&p.length&&(window.top.sketchMeasureCompare.tplImgList=p.map((function(e){return{name:e.name.replace(/\.[^\.]+$/g,""),url:"".concat(URL.createObjectURL(e),"#")}})));var h=null!==(c=null===(d=n.find((function(e){return"index.html"===e.name})))||void 0===d||null===(a=d.webkitRelativePath)||void 0===a||null===(l=a.replace)||void 0===l?void 0:l.call(a,"index.html",""))&&void 0!==c?c:"",u=new RegExp("^".concat(h)),m=(n=n.map((function(e){return{name:e.name,path:e.webkitRelativePath.replace(u,""),url:URL.createObjectURL(e)}}))).find((function(e){return"index.html"===e.name}))||{url:window.top.sketchMeasureCompare.tpl};m&&fetch(m.url).then((function(e){return e.text()})).then((function(e){return n.forEach((function(t){var o=t.path.split("/").map(encodeURIComponent).join("/");e=e.replace(o,"".concat(t.url,"#"))})),e=e.replace(/\.\/blob/g,"blob")})).then((function(e){return e=e.replace("</head>",'<script src="'.concat(window.top.sketchMeasureCompare.sketchMeasure,'"><\/script></head>'))})).then((function(e){var n=new Blob([e],{type:"text/html"}),i=URL.createObjectURL(n);t.src=i,o.style.display="none",t.style.display="block"}))}};var i=function(){URL.revokeObjectURL(t.src),n.forEach((function(e){URL.revokeObjectURL(e.url)})),(window.top.sketchMeasureCompare.tplImgList||[]).forEach((function(e){return URL.revokeObjectURL(e.url)})),delete window.top.sketchMeasureCompare.tplImgList,n=[],t.src="",e.value="",o.style.display="block",t.style.display="none"};document.addEventListener("beforeunload",i),window.addEventListener("message",(function(e){var t=e.data;t&&t.msg&&("CLEAR UI"===t.msg&&i())}))}.toString()+")()"],{type:"text/javascript"}));var c=o(693);const d=URL.createObjectURL(new Blob(['<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="UTF-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta name="viewport" content="width=device-width,initial-scale=1"/> <title>Sketch Measure Compare</title> </head> <body> <div id="placeholder"> <div>Please Choose UI Folder!</div> <br/> <input type="file" webkitdirectory id="uploader"/> </div> <iframe id="iframe"></iframe> <script>(()=>{"use strict";const e=document.createElement("script");e.src=window.top.sketchMeasureCompare.index,document.body.appendChild(e);const t=document.createElement("link");t.rel="stylesheet",t.href=window.top.sketchMeasureCompare.css,document.head.appendChild(t)})()<\/script> </body> </html> '],{type:"text/html"})),a=URL.createObjectURL(new Blob(["("+function(){var e=window.top.sketchMeasureCompare.tplImgList||[];e.length&&Promise.all(e.map((function(e){return new Promise((function(t){var o=document.createElement("img");o.onload=function(){return t({img:o,name:e.name})},o.onerror=function(){return t(null)},o.src=e.url}))}))).then((function(e){var t={resolution:1,unit:"px",colorFormat:"color-hex",artboards:e.filter(Boolean).map((function(e){var t=e.img;return{notes:[],layers:[],name:e.name,pageName:"",width:t.width,height:t.height,imagePath:t.src,imageIconPath:t.src}}))};meaxure.render(t)}))}.toString()+")()"],{type:"text/javascript"}));const l=URL.createObjectURL(new Blob(['<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="utf-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta name="viewport" content="width=device-width,initial-scale=1"/> <title>Spec Export - Sketch MeaXure</title> <script src="https://hubzyy.gitee.io/sketch-meaxure/src/jquery.js"><\/script> <script src="https://hubzyy.gitee.io/sketch-meaxure/src/index.js"><\/script> <link rel="stylesheet" href="https://hubzyy.gitee.io/sketch-meaxure/src/index.css"/> </head> <body id="app"> <script>(()=>{"use strict";const e=document.createElement("script");e.src=window.top.sketchMeasureCompare.tplIndex,document.body.appendChild(e)})()<\/script> </body> </html> '],{type:"text/html"}));var r=!1;const s=function(e){var t,o;if(!r){r=!0;var n=null!==(t=null==e?void 0:e.zIndex)&&void 0!==t?t:1e4,i=null!==(o=null==e?void 0:e.enableDomRulers)&&void 0!==o&&o;window.top.sketchMeasureCompare.config={zIndex:n,enableDomRulers:i};var c=document.createElement("iframe"),d=function(e,t){Object.keys(t).forEach((function(o){e.style[o]=t[o]}))};d(c,{width:"100vw",height:"100vh",position:"fixed",top:"0",left:"0",border:"none",zIndex:"".concat(n),display:"none"});var a=document.createElement("div");d(a,{position:"fixed",zIndex:"".concat(n),width:"100vw",height:"0",top:"0",left:"0"});var l=document.createElement("div");d(l,{position:"fixed",zIndex:"".concat(n),right:"0",bottom:"40px",backgroundColor:"#04BE02",padding:"2px 14px",borderRadius:"3px",color:"#fff",height:"26px",lineHeight:"26px",fontSize:"16px",userSelect:"none",webkitUserSelect:"none"}),l.innerText="UI";var s=0,p=0,h=!1,u=0,m=0,f=0,v=0;l.onclick=function(e){var t=l.getBoundingClientRect(),o=t.left,n=t.top;(Math.abs(o-u)<1||Math.abs(n-m)<1||!(null!=e&&e.isTrusted))&&(c.style.display="none"===c.style.display?"block":"none")};var y=function(e){var t,o,n,i,c,d;a.style.height="100vh";var r=l.getBoundingClientRect(),y=r.left,g=r.top,x=r.width,w=r.height,b=a.getBoundingClientRect(),N=b.width,C=b.height;u=y,m=g,f=C,v=N;var k=null!==(t=null==e||null===(o=e.touches)||void 0===o||null===(n=o[0])||void 0===n?void 0:n.clientX)&&void 0!==t?t:null==e?void 0:e.clientX,E=null!==(i=null==e||null===(c=e.touches)||void 0===c||null===(d=c[0])||void 0===d?void 0:d.clientY)&&void 0!==i?i:null==e?void 0:e.clientY;s=k-u-x,p=E-m-w,h=!0},g=function(){a.style.height="0",h=!1},x=function(e){if(e.preventDefault(),h){var t,o,n,i,c,d,a=null!==(t=null==e||null===(o=e.touches)||void 0===o||null===(n=o[0])||void 0===n?void 0:n.clientX)&&void 0!==t?t:null==e?void 0:e.clientX,r=null!==(i=null==e||null===(c=e.touches)||void 0===c||null===(d=c[0])||void 0===d?void 0:d.clientY)&&void 0!==i?i:null==e?void 0:e.clientY;l.style.right=v-a+s+"px",l.style.bottom=f-r+p+"px"}};l.onmousedown=y,a.onmousemove=x,a.onmouseup=g,l.ontouchstart=y,a.ontouchmove=x,a.ontouchend=g,a.appendChild(l),c.src=window.top.sketchMeasureCompare.html,document.body.appendChild(c),document.body.appendChild(a)}};function p(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,o){return t&&p(e.prototype,t),o&&p(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}var u=h((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=s}));if(u.prototype.rulers=e,u.prototype.sketchMeasure=t,u.prototype.index=i,u.prototype.css=c.Z,u.prototype.html=d,u.prototype.tplIndex=a,u.prototype.tpl=l,!window.top.sketchMeasureCompare){var m=new u;window.top.sketchMeasureCompare=m}const f=window.top.sketchMeasureCompare})(),n=n.default})()));