(()=>{"use strict";const e=URL.createObjectURL(new Blob(["(".concat((function(){!function e(t){if(!t.isInitSketchMeasureDoc){t.isInitSketchMeasureDoc=!0;var n=function(){!function(e){e.querySelectorAll("*").forEach((function(e){e.isInitSketchMeasureNode||(e.isInitSketchMeasureNode=!0,e.addEventListener("mouseenter",(function(){window.parent.postMessage({msg:"updateRulers",payload:e.getBoundingClientRect()},"*")})),e.addEventListener("mouseleave",(function(){window.parent.postMessage({msg:"updateRulers",payload:{width:0,height:0,top:0,left:0}},"*")})))}))}(t),document.querySelectorAll("iframe").forEach((function(t){t.contentDocument&&e(t.contentDocument)}))};n(),new MutationObserver(n).observe(t.documentElement,{attributes:!0,childList:!0,subtree:!0})}}(document)}),")();")],{type:"text/javascript"})),t=URL.createObjectURL(new Blob(["(".concat((function(){return setTimeout((function(){var e,t=null===(e=document.getElementsByClassName("screen-viewer-inner"))||void 0===e?void 0:e[0],n=document.getElementById("screen"),o=document.getElementById("rulers"),d=document.getElementById("flow-mode");if(t&&n&&o&&d){var c=function(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))},l=document.createElement("style");l.innerHTML=".layer{z-index: 1;}",document.head.appendChild(l);var i=document.createElement("iframe");c(i,{border:"none",position:"absolute"}),i.width="100%",i.height="100%",i.src=window.top.location.href,i.onload=function(){if(i.contentDocument){var e=document.createElement("script");e.src=window.top.sketchMeasureCompare.rulers,i.contentDocument.head.appendChild(e)}};var a=document.createElement("input");c(a,{border:"none",outline:"none",height:"20px"}),a.placeholder="url",a.value=i.src,a.oninput=function(e){i.src=e.target.value},a.onkeyup=function(e){"Enter"===e.key&&(i.src="",i.src=e.target.value)};var r=n.cloneNode(!1);c(r,{backgroundImage:"",overflow:"hidden"});var s=o.cloneNode(!0);s.appendChild(s.childNodes[0].cloneNode(!0)),s.appendChild(s.childNodes[1].cloneNode(!0)),c(s.childNodes[0],{border:"none",borderLeft:"1px dashed #419bf9",width:"0px"}),c(s.childNodes[1],{border:"none",borderTop:"1px dashed #419bf9",height:"0px"}),c(s.childNodes[2],{border:"none",borderRight:"1px dashed #419bf9",width:"0px"}),c(s.childNodes[3],{border:"none",borderBottom:"1px dashed #419bf9",height:"0px"});var p=o.cloneNode(!0);p.appendChild(p.childNodes[0].cloneNode(!0)),p.appendChild(p.childNodes[1].cloneNode(!0)),c(p.childNodes[0],{border:"none",borderLeft:"1px dashed #ee6723",width:"0px"}),c(p.childNodes[1],{border:"none",borderTop:"1px dashed #ee6723",height:"0px"}),c(p.childNodes[2],{border:"none",borderRight:"1px dashed #ee6723",width:"0px"}),c(p.childNodes[3],{border:"none",borderBottom:"1px dashed #ee6723",height:"0px"});var h=document.getElementById("ld").cloneNode(!0),u=document.getElementById("td").cloneNode(!0),f=document.getElementById("rd").cloneNode(!0),m=document.getElementById("bd").cloneNode(!0);r.appendChild(i),r.appendChild(s),r.appendChild(p),r.appendChild(h),r.appendChild(u),r.appendChild(f),r.appendChild(m),t.appendChild(a),t.appendChild(r);var y=function(){var e,t,l=n.style,y=l.width,v=l.height,x=l.marginTop;y!==r.style.width&&(i.src="",i.src=a.value),c(r,{width:y,height:v,marginTop:x,marginLeft:d.checked?0:"".concat(parseFloat(y)/2+10,"px"),opacity:d.checked?.5:1}),r.className=n.className,c(a,{width:y,marginTop:"-".concat(parseFloat(v)/2+20+10,"px"),marginLeft:d.checked?0:"".concat(parseFloat(y)/2+10,"px")}),a.className=n.className,c(s,o.style),c(s.childNodes[0],{left:o.childNodes[0].style.left}),c(s.childNodes[1],{top:o.childNodes[1].style.top}),c(s.childNodes[2],{left:"".concat(parseFloat(o.childNodes[0].style.left)+parseFloat(o.childNodes[0].style.width),"px")}),c(s.childNodes[3],{top:"".concat(parseFloat(o.childNodes[1].style.top)+parseFloat(o.childNodes[1].style.height),"px")});var g=null===(e=document.getElementsByClassName("selected"))||void 0===e||null===(t=e[0])||void 0===t?void 0:t.style;g&&(c(p,{display:""}),c(p.childNodes[0],{left:g.left}),c(p.childNodes[1],{top:g.top}),c(p.childNodes[2],{left:"".concat(parseFloat(g.left)+parseFloat(g.width),"px")}),c(p.childNodes[3],{top:"".concat(parseFloat(g.top)+parseFloat(g.height),"px")})),d.checked&&(c(o,{display:"none"}),c(s,{display:"none"}),c(p,{display:"none"}),c(h,{display:"none"}),c(u,{display:"none"}),c(f,{display:"none"}),c(m,{display:"none"}))};y(),window.addEventListener("message",(function(e){var t=e.data;if(t&&t.msg){var n=t.msg,l=t.payload;if("updateRulers"===n&&(c(o,{display:d.checked?"none":""}),c(o.childNodes[0],{left:"".concat(l.left,"px"),width:"".concat(l.width,"px")}),c(o.childNodes[1],{top:"".concat(l.top,"px"),height:"".concat(l.height,"px")}),c(s,{display:d.checked?"none":""}),c(s.childNodes[0],{left:"".concat(l.left,"px")}),c(s.childNodes[1],{top:"".concat(l.top,"px")}),c(s.childNodes[2],{left:"".concat(l.left+l.width,"px")}),c(s.childNodes[3],{top:"".concat(l.top+l.height,"px")}),"none"!==p.style.display)){var i=parseFloat(p.childNodes[0].style.left),a=parseFloat(p.childNodes[1].style.top),r=parseFloat(p.childNodes[2].style.left),y=parseFloat(p.childNodes[3].style.top),v=l.left,x=l.top,g=l.left+l.width,b=l.top+l.height,w=v||x||g||b;c(h,g<=i?{display:w?"":"none",left:"".concat(g,"px"),top:"".concat(a+(y-a)/2,"px"),width:"".concat(i-g,"px")}:{display:v<r&&w?"":"none",left:"".concat(v<i?v:i,"px"),top:"".concat(a+(y-a)/2,"px"),width:"".concat(Math.abs(v-i),"px")}),h.childNodes[0].dataset.width=h.style.width,c(f,v>=r?{display:w?"":"none",left:"".concat(r,"px"),top:"".concat(a+(y-a)/2,"px"),width:"".concat(v-r,"px")}:{display:g>i&&w?"":"none",left:"".concat(g>r?r:g,"px"),top:"".concat(a+(y-a)/2,"px"),width:"".concat(Math.abs(g-r),"px")}),f.childNodes[0].dataset.width=f.style.width,c(u,b<=a?{display:w?"":"none",left:"".concat(i+(r-i)/2,"px"),top:"".concat(b,"px"),height:"".concat(a-b,"px")}:{display:x<y&&w?"":"none",left:"".concat(i+(r-i)/2,"px"),top:"".concat(x<a?x:a,"px"),height:"".concat(Math.abs(x-a),"px")}),u.childNodes[0].dataset.height=u.style.height,c(m,x>=y?{display:w?"":"none",left:"".concat(i+(r-i)/2,"px"),top:"".concat(y,"px"),height:"".concat(x-y,"px")}:{display:b>a&&w?"":"none",left:"".concat(i+(r-i)/2,"px"),top:"".concat(b>y?y:b,"px"),height:"".concat(Math.abs(b-y),"px")}),m.childNodes[0].dataset.height=m.style.height}}})),document.onkeyup=function(e){"c"!==e.key||d.checked||(c(p,{display:""}),c(p.childNodes[0],{left:s.childNodes[0].style.left}),c(p.childNodes[1],{top:s.childNodes[1].style.top}),c(p.childNodes[2],{left:s.childNodes[2].style.left}),c(p.childNodes[3],{top:s.childNodes[3].style.top}),t.click())},new MutationObserver(y).observe(n,{attributes:!0,childList:!0,subtree:!0})}}),220)}),")();")],{type:"text/javascript"})),n=URL.createObjectURL(new Blob(["(".concat((function(){var e=document.getElementById("uploader"),t=document.getElementById("iframe"),n=document.getElementById("placeholder"),o=document.getElementById("clear"),d=[];e.onchange=function(c){var l=c.target.files;if(l.length){if(!(d=Array.from(l)).find((function(e){return"index.html"===e.name})))return e.value="",void alert("UI: index.html Not Found!");var i=(d=d.map((function(e){return{name:e.name,path:e.webkitRelativePath.replace(/^.*?\//,""),url:URL.createObjectURL(e)}}))).find((function(e){return"index.html"===e.name}));i&&fetch(i.url).then((function(e){return e.text()})).then((function(e){return d.forEach((function(t){var n=t.path.split("/").map(encodeURIComponent).join("/");e=e.replace(n,"".concat(t.url,"#"))})),e=e.replace(/\.\/blob/g,"blob")})).then((function(e){return e.replace("</head>",'<script src="'.concat(window.top.sketchMeasureCompare.sketchMeasure,'"><\/script></head>'))})).then((function(e){var d=new Blob([e],{type:"text/html"}),c=URL.createObjectURL(d);t.src=c,n.style.display="none",t.style.display="block",o.style.display="block"}))}};var c=function(){URL.revokeObjectURL(t.src),d.forEach((function(e){URL.revokeObjectURL(e.url)})),d=[],t.src="",e.value="",n.style.display="block",t.style.display="none",o.style.display="none"};document.addEventListener("beforeunload",c),o.onclick=c}),")();")],{type:"text/javascript"}));var o="html,\nbody {\n    margin: 0;\n    padding: 0;\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n    background-color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n#iframe {\n    width: 100vw;\n    height: 100vh;\n    border: none;\n    display: none;\n}\n#clear {\n    transition: all 0.5s;\n    opacity: 0.65;\n    position: fixed;\n    bottom: 0px;\n    left: calc(50% + 260px);\n    font-size: 12px;\n    color: #989a9c;\n    padding: 0 14px;\n    transform: translateX(-50%);\n    height: 40px;\n    line-height: 40px;\n    border-radius: 6px 6px 0 0;\n    backdrop-filter: blur(12px);\n    background-color: rgba(35, 37, 39, 0.85);\n    cursor: pointer;\n    display: none;\n}\n#clear:hover {\n    opacity: 1;\n}\n".replace(/\n/g,"").replace(/\s+/g," ");const d=URL.createObjectURL(new Blob([o],{type:"text/css"}));var c=URL.createObjectURL(new Blob(["(".concat((function(){var e=document.createElement("script");e.src=window.top.sketchMeasureCompare.js,document.body.appendChild(e);var t=document.createElement("link");t.rel="stylesheet",t.href=window.top.sketchMeasureCompare.css,document.head.appendChild(t)}),")();")],{type:"text/javascript"})),l='<!DOCTYPE html>\n<html lang="zh-CN">\n    <head>\n        <meta charset="UTF-8" />\n        <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n        <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n        <title>Sketch Measure Compare</title>\n    </head>\n    <body>\n        <div id="placeholder">\n            <div>Please Choose UI Folder!</div>\n            <br/>\n            <input\n                type="file"\n                webkitdirectory\n                id="uploader"\n            />\n        </div>\n        <div id="clear">CLEAR UI</div>\n        <iframe id="iframe"></iframe>\n        <script src="'.concat(c,'"><\/script>\n    </body>\n</html>\n').replace(/\n/g,"").replace(/\s+/g," ");const i=URL.createObjectURL(new Blob([l],{type:"text/html"}));var a={};window.top.sketchMeasureCompare||(window.top.sketchMeasureCompare=a,a.rulers=e,a.sketchMeasure=t,a.js=n,a.css=d,a.html=i,a.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.zIndex,n=void 0===t?1e4:t,o=document.createElement("iframe"),d=function(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))};d(o,{width:"100vw",height:"100vh",position:"fixed",top:"0",left:"0",border:"none",zIndex:"".concat(n),display:"none"});var c=document.createElement("div");d(c,{position:"fixed",zIndex:"".concat(n),width:"100vw",height:"0",top:"0",left:"0"});var l=document.createElement("div");d(l,{position:"fixed",zIndex:"".concat(n),right:"0",bottom:"40px",backgroundColor:"#04BE02",padding:"2px 14px",borderRadius:"3px",color:"#fff",height:"26px",lineHeight:"26px",fontSize:"16px",userSelect:"none",webkitUserSelect:"none"}),l.innerText="UI";var i=0,a=0,r=!1,s=0,p=0,h=0,u=0;l.onclick=function(e){var t=l.getBoundingClientRect(),n=t.left,d=t.top;(Math.abs(n-s)<1||Math.abs(d-p)<1||null==e||!e.isTrusted)&&(o.style.display="none"===o.style.display?"block":"none")};var f=function(e){var t,n,o,d,f,m;c.style.height="100vh";var y=l.getBoundingClientRect(),v=y.left,x=y.top,g=y.width,b=y.height,w=c.getBoundingClientRect(),N=w.width,k=w.height;s=v,p=x,h=k,u=N;var C=null!==(t=null==e||null===(n=e.touches)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.clientX)&&void 0!==t?t:null==e?void 0:e.clientX,E=null!==(d=null==e||null===(f=e.touches)||void 0===f||null===(m=f[0])||void 0===m?void 0:m.clientY)&&void 0!==d?d:null==e?void 0:e.clientY;i=C-s-g,a=E-p-b,r=!0},m=function(){c.style.height="0",r=!1},y=function(e){if(e.preventDefault(),r){var t,n,o,d,c,s,p=null!==(t=null==e||null===(n=e.touches)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.clientX)&&void 0!==t?t:null==e?void 0:e.clientX,f=null!==(d=null==e||null===(c=e.touches)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.clientY)&&void 0!==d?d:null==e?void 0:e.clientY;l.style.right=u-p+i+"px",l.style.bottom=h-f+a+"px"}};l.onmousedown=f,c.onmousemove=y,c.onmouseup=m,l.ontouchstart=f,c.ontouchmove=y,c.ontouchend=m,c.appendChild(l),fetch(window.top.sketchMeasureCompare.html).then((function(e){return e.text()})).then((function(e){var t=new Blob([e],{type:"text/html"}),n=URL.createObjectURL(t);o.src=n,document.body.appendChild(o),document.body.appendChild(c)})),document.addEventListener("beforeunload",(function(){URL.revokeObjectURL(o.src)}))})})();