(()=>{const e=document.getElementById("uploader"),t=document.getElementById("iframe"),l=document.getElementById("placeholder"),a=document.getElementById("clear");let n=[];e.onchange=({target:{files:e}})=>{!e.length||(e=(n=[...e].map(e=>({name:e.name,path:e.webkitRelativePath.replace(/^.*?\//,""),url:URL.createObjectURL(e)}))).find(e=>"index.html"===e.name))&&fetch(e.url).then(e=>e.text()).then(l=>(n.forEach(e=>{var t=e.path.split("/").map(encodeURIComponent).join("/");l=l.replace(t,e.url+"#")}),l=l.replace(/\.\/blob/g,"blob"))).then(e=>e=e.replace("</head>",'<script src="https://neco86.github.io/Sketch-Measure-Compare/dist/sketchMeasure.min.js"><\/script></head>')).then(e=>{e=new Blob([e],{type:"text/html"}),e=URL.createObjectURL(e);t.src=e,l.style.display="none",t.style.display="block",a.style.display="block"})};var c=()=>{URL.revokeObjectURL(t.src),n.forEach(e=>{URL.revokeObjectURL(e.url)}),n=[],t.src="",e.value="",l.style.display="block",t.style.display="none",a.style.display="none"};document.addEventListener("beforeunload",c),a.onclick=c})();